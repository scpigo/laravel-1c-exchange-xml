# laravel-1c-exchange-xml

## Настройка файла конфигурации:
- В файле '1c.php' в массиве exchangers необходимо задать элемент с ключом - произвольным именем и значением - массивом со значениями:
    'local_disk_driver' - драйвер локального файлового хранилища Laravel (local или public)
    'local_path' - путь к папке с файлом в локальном хранилище

    'server_disk_driver' - драйвер удаленного файлового хранилища Laravel (sftp иди http)
    'server_path' - путь к папке с файлом в удаленном хранилище (если используется sftp)
    'remote_url' - url, по которому пубет отправляться http-запрос (если используется http)

    'filename' - имя файла,
    
    'db_driver' - база данных (mongo),

## Работа с пакетом:
- Для получения xml-файла с удаленного хранилища необходимо в командной строке прописать команду xml:download, после чего в очередь поставится соответствующая задача
- Для отправки xml-файла в удаленное хранилище необходимо в командной строке прописать команду xml:upload
- Для записи данных с xml-файла в базу данных необходимо в командной строке прописать команду xml:write. Перед этим в пакете необходимо подготовить модели для работы с базой данных, а так же сервисные классы для работы с конкретным файлом. Так как в 1C теги в xml-файле имеют имена на русском языке, необходимо подготовить классы-трансформеры пакета Fractal для перевода данных в массив с ключами на английском языке, а так же отредактировать класс XmlExchangeFields для вашего xml-файла.
- Для конвертации массива данных в xml-файл необходимо в командной строке прописать команду xml:generate (пакет пока не поддерживает получение данных из базы данных).